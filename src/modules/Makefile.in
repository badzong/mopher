# Makefile, modules

include @top_srcdir@/Makefile.common

SRC=			cast.c string.c list.c spamd.c rbl.c counter.c \
			regex.c memdb.c dblog.c @MOD_ACL_SPF@ @MOD_DB_BDB@ \
			@MOD_DB_MYSQL@
MODULES=		$(SRC:.c=.so)

CFLAGS+=		-I@top_srcdir@ -I@top_srcdir@/src/include $(BDB_DB185_H)
LDFLAGS.spf.so?=	-lspf2
LDFLAGS.sakila.so?=	-lmysqlclient
LDFLAGS.bdb.so?=	$(BDB_LIBS)

all: $(MODULES)

clean:
	-rm $(MODULES)

.SUFFIXES: .c .so
.c.so:
	$(CC) $(CFLAGS) $(LDFLAGS.modules) $(LDFLAGS.$@) -o $@ $<
