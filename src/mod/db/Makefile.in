include @top_srcdir@/Makefile.common

INCLUDE=-I@top_srcdir@ -I@top_srcdir@/src/include
CFLAGS+=$(INCLUDE)

OBJECTS=@MOD_DB_BDB@ @MOD_DB_MYSQL@
MODULES=@MOD_DB_BDB@ @MOD_DB_MYSQL@
MOD_ALL=@MOD_ALL@

all: $(MOD_ALL)

bdb.so: bdb.c Makefile
	$(CC) $(CFLAGS) $(SOFLAGS) -ldb -o $@ $<

sakila.so: sakila.c Makefile
	$(CC) $(CFLAGS) $(SOFLAGS) -lmysqlclient -o $@ $<

lib.a: $(OBJECTS)
	$(AR) $(ARFLAGS) $@ $^

clean:
	-rm lib.a $(OBJECTS) $(MODULES)
