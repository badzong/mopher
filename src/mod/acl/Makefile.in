include @top_srcdir@/Makefile.common

INCLUDE=-I@top_srcdir@ -I@top_srcdir@/src/include
CFLAGS+=$(INCLUDE)

OBJECTS=milter.o string.o spamd.o rbl.o @MOD_ACL_SPF@
MODULES=milter.so string.so spamd.so rbl.so @MOD_ACL_SPF@
MOD_ALL=@MOD_ALL@

all: $(MOD_ALL)

spf.so: spf.c
	$(CC) $(CFLAGS) $(SOFLAGS) -lspf2 -o $@ $<

lib.a: $(OBJECTS)
	$(AR) $(ARFLAGS) $@ $^

clean:
	-rm lib.a $(OBJECTS) $(MODULES)
